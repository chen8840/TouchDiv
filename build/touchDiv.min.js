!function(){"use strict";function a(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)}window.touchDiv=function(b){function c(){var a=q,c=r;q+=l,r+=m,q>0&&(q=0),r>0&&(r=0),q<-(g.scrollWidth-g.clientWidth)&&(q=-(g.scrollWidth-g.clientWidth)),r<-(g.scrollHeight-b.clientHeight)&&(r=-(g.scrollHeight-b.clientHeight)),c==r&&a==q||(g.style.transform="translate3d("+q+"px,"+r+"px,0px)")}function d(){var a=h.style;a.height=Math.max(10,Math.floor(b.clientHeight*b.clientHeight/b.scrollHeight))+"px",a.top=Math.floor(-r*b.clientHeight/b.scrollHeight)+"px"}function e(){var a=i.style;a.width=Math.max(10,Math.floor(g.clientWidth*g.clientWidth/g.scrollWidth))+"px",a.left=Math.floor(-q*g.clientWidth/g.scrollWidth)+"px"}function f(a,b,c){!function(a,b,c){if("ontouchend"in document)switch(b){case"touchstart":a.addEventListener("touchstart",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchmove":a.addEventListener("touchmove",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchend":a.addEventListener("touchend",function(a){c(a,void 0,void 0)},!1)}else switch(b){case"touchstart":a.addEventListener("mousedown",function(b){a._mousedown=!0,c(b,b.clientX,b.clientY)},!1);break;case"touchmove":a.addEventListener("mousemove",function(b){a._mousedown&&c(b,b.clientX,b.clientY)},!1);break;case"touchend":a.addEventListener("mouseup",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1),a.addEventListener("mouseout",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1)}}(a,b,c)}1==b.nodeType&&"div"==b.tagName.toLowerCase()||console.warn("touchDiv's param is not a div element."),b.style.position="relative",b.style.overflow="hidden";var g=document.createElement("div");g.innerHTML=b.innerHTML,b.innerHTML="",b.appendChild(g);var h=document.createElement("div");h.style.position="absolute",h.style.width="4px",h.style.right="1px",h.style.backgroundColor="gray",h.style.zIndex="9999999",h.style.opacity="0.8",h.style.display="none",b.appendChild(h);var i=document.createElement("div");i.style.position="absolute",i.style.height="4px",i.style.bottom="1px",i.style.backgroundColor="gray",i.style.zIndex="9999999",i.style.opacity="0.8",i.style.display="none",b.appendChild(i);var j,k,l,m,n,o,p=[],q=0,r=0;f(b,"touchstart",function(c,f,g){a()&&c.preventDefault(),c.stopPropagation(),o&&(clearTimeout(o),o=void 0),j=f,k=g,h.style.display=i.style.display="block",h.style.opacity=i.style.opacity="0.8",h.clientHeight>=b.clientHeight&&(h.style.display="none"),i.clientWidth>=b.clientWidth&&(i.style.display="none"),d(),e(),n=void 0,p=[]}),f(b,"touchmove",function(a,b,f){a.stopPropagation(),l=b-j,m=f-k,j=b,k=f,c(),d(),e();var g=new Date;void 0!==n&&g-n!==0&&p.push({x:l/(g-n),y:m/(g-n)}),n=g}),f(b,"touchend",function(a){function b(){l=m=0,(f>100||-100>f)&&(l=20*f/1e3,f/=1.05),(g>100||-100>g)&&(m=20*g/1e3,g/=1.05),0!==l||0!==m?(c(),d(),e(),o=setTimeout(b,20)):j>0?(h.style.opacity=i.style.opacity=(.8-(15-j)/15).toFixed(1)+"",j--,o=setTimeout(b,30)):h.style.display=i.style.display="none"}a.stopPropagation();for(var f=0,g=0,j=15,k=0;k<p.length;k++)f+=p[k].x,g+=p[k].y;p.length>0&&(f=1e3*f/p.length,g=1e3*g/p.length),Math.sqrt(l*l+m*m)<8&&(f=g=0),o=setTimeout(b,20)})},"function"==typeof define&&define.amd&&define("touchDiv",[],function(){return window.touchDiv})}();