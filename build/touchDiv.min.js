!function(){"use strict";function a(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)}window.touchDiv=function(b,c){function d(){var a=x,d=y;x+=o,y+=p,x>0&&(x=0),y>0&&(y=0,c.scrollDivToTop&&c.scrollDivToTop()),x<-(h.scrollWidth-h.clientWidth)&&(x=h.scrollWidth<h.clientWidth?0:-(h.scrollWidth-h.clientWidth)),y<-(h.scrollHeight-b.clientHeight)&&(y=h.scrollHeight<b.clientHeight?0:-(h.scrollHeight-b.clientHeight),c.scrollDivToBottom&&c.scrollDivToBottom()),d==y&&a==x||(h.style.transform="translate3d("+x+"px,"+y+"px,0px)")}function e(){var a=k.style;a.height=Math.max(10,Math.floor(b.clientHeight*b.clientHeight/b.scrollHeight))+"px",a.top=Math.floor(-y*b.clientHeight/b.scrollHeight)+"px"}function f(){var a=l.style;a.width=Math.max(10,Math.floor(h.clientWidth*h.clientWidth/h.scrollWidth))+"px",a.left=Math.floor(-x*h.clientWidth/h.scrollWidth)+"px"}function g(a,b,c){!function(a,b,c){if("ontouchend"in document)switch(b){case"touchstart":a.addEventListener("touchstart",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchmove":a.addEventListener("touchmove",function(a){c(a,a.touches[0].clientX,a.touches[0].clientY)},!1);break;case"touchend":a.addEventListener("touchend",function(a){c(a,void 0,void 0)},!1)}else switch(b){case"touchstart":a.addEventListener("mousedown",function(b){a._mousedown=!0,c(b,b.clientX,b.clientY)},!1);break;case"touchmove":a.addEventListener("mousemove",function(b){a._mousedown&&c(b,b.clientX,b.clientY)},!1);break;case"touchend":a.addEventListener("mouseup",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1),a.addEventListener("mouseout",function(b){a._mousedown&&(a._mousedown=!1,c(b,b.clientX,b.clientY))},!1)}}(a,b,c)}1==b.nodeType&&"div"==b.tagName.toLowerCase()||console.warn("touchDiv's param is not a div element."),b.style.position="relative",b.style.overflow="hidden";var h=document.createElement("div");if(document.implementation.hasFeature("Range","2.0")){var i=document.createRange();i.selectNodeContents(b);var j=i.extractContents();h.appendChild(j)}else h.innerHTML=b.innerHTML,b.innerHTML="";b.appendChild(h),h.offsetHeight<b.clientHeight&&(h.style.height="100%");var k=document.createElement("div");k.style.position="absolute",k.style.width="4px",k.style.right="1px",k.style.backgroundColor="gray",k.style.zIndex="9999999",k.style.opacity="0.8",k.style.display="none",b.appendChild(k);var l=document.createElement("div");l.style.position="absolute",l.style.height="4px",l.style.bottom="1px",l.style.backgroundColor="gray",l.style.zIndex="9999999",l.style.opacity="0.8",l.style.display="none",b.appendChild(l);var m,n,o,p,q,r,s,t,u,v,w=[],x=0,y=0;g(b,"touchstart",function(c,d,g){if(a()&&c.preventDefault(),c.stopPropagation(),r&&(clearTimeout(r),r=void 0),m=d,n=g,k.style.display=l.style.display="block",k.style.opacity=l.style.opacity="0.8",""!==h.style.height){var i=h.style.height;h.style.height="",h.scrollHeight<=b.clientHeight&&(h.style.height=i)}e(),f(),k.clientHeight>=b.clientHeight&&(k.style.display="none"),l.clientWidth>=b.clientWidth&&(l.style.display="none"),q=void 0,w=[],s=u=v=t=void 0,0>=-y&&(s=!0),-y+h.clientHeight>=h.scrollHeight&&(u=!0)}),g(b,"touchmove",function(a,b,g){a.stopPropagation(),o=b-m,p=g-n,m=b,n=g,c.scrollDivTouchMove&&c.scrollDivTouchMove(),d(),e(),f();var h=new Date;void 0!==q&&h-q!==0&&w.push({x:o/(h-q),y:p/(h-q)}),q=h}),g(b,"touchend",function(a){function g(){o=p=0,(h>100||-100>h)&&(o=20*h/1e3,h/=1.05),(i>100||-100>i)&&(p=20*i/1e3,i/=1.05),0!==o||0!==p?(d(),e(),f(),r=setTimeout(g,20)):j>0?(k.style.opacity=l.style.opacity=(.8-(15-j)/15).toFixed(1)+"",j--,r=setTimeout(g,30)):(k.style.display=l.style.display="none",r=void 0)}a.stopPropagation(),0>=-y&&(t=!0),-y+b.clientHeight>=b.scrollHeight&&(v=!0),s&&t&&p>0&&c.topToTopFunc&&c.topToTopFunc(),u&&v&&0>p&&c.buttomToButtomFunc&&c.buttomToButtomFunc();for(var h=0,i=0,j=15,m=0;m<w.length;m++)h+=w[m].x,i+=w[m].y;w.length>0&&(h=1e3*h/w.length,i=1e3*i/w.length),Math.sqrt(o*o+p*p)<5&&(h=i=0),r=setTimeout(g,20)})},"function"==typeof define&&define.amd&&define("touchDiv",[],function(){return window.touchDiv})}();